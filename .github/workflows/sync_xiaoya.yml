name: sync xiaoya
on:
  workflow_dispatch:
jobs:
  sync-xiaoya:
    runs-on: ubuntu-latest
    steps:
      - name: copy
        run: |
          docker run -d --name=xiaoya xiaoyaliu/alist:latest
          sleep 30s
          mkdir mydata
          docker cp xiaoya:/opt/alist/alist ./mydata/
          docker cp xiaoya:/var/lib/data.zip ./mydata/
      # - name: Upload files to Artifacts
      #   uses: actions/upload-artifact@v3
      #   with:
      #     name: xylist
      #     path: |
      #       ./xylist
      - name: Upload binaries to release
        uses: svenstaro/upload-release-action@v2
        with:
          repo_token: ${{ secrets.PAT }}
          file: ./mydata/*
          tag: ${{ github.ref }}
          overwrite: true